import{e as P}from"./cryptoJs.abce1e06.js";import{m as at}from"./_mixin.6a89461b.js";import{a as ht}from"./entry.94f568a7.js";import{Z as W,a1 as E,a0 as lt,$ as M,a2 as D,W as A}from"./vue.6b2d282b.js";import"./ant.202d08f0.js";import"./common.914374cd.js";import"./moment.8b5e7d95.js";import"./ag.b10eb020.js";import"./lodash.0a37595b.js";import"./numeral.adfb6437.js";var _={wkt:{Point:"POINT",LineString:"LINESTRING",Polygon:"POLYGON",MultiPoint:"MULTIPOINT",MultiLineString:"MULTILINESTRING",MultiPolygon:"MULTIPOLYGON",GeometryCollection:"GEOMETRYCOLLECTION"},wkb:{Point:1,LineString:2,Polygon:3,MultiPoint:4,MultiLineString:5,MultiPolygon:6,GeometryCollection:7},geoJSON:{Point:"Point",LineString:"LineString",Polygon:"Polygon",MultiPoint:"MultiPoint",MultiLineString:"MultiLineString",MultiPolygon:"MultiPolygon",GeometryCollection:"GeometryCollection"}},L=b;function b(s,a){this.buffer=new Buffer(s),this.position=0,this.allowResize=a}function S(s,a){return function(u,l){this.ensureSize(a),s.call(this.buffer,u,this.position,l),this.position+=a}}b.prototype.writeUInt8=S(Buffer.prototype.writeUInt8,1);b.prototype.writeUInt16LE=S(Buffer.prototype.writeUInt16LE,2);b.prototype.writeUInt16BE=S(Buffer.prototype.writeUInt16BE,2);b.prototype.writeUInt32LE=S(Buffer.prototype.writeUInt32LE,4);b.prototype.writeUInt32BE=S(Buffer.prototype.writeUInt32BE,4);b.prototype.writeInt8=S(Buffer.prototype.writeInt8,1);b.prototype.writeInt16LE=S(Buffer.prototype.writeInt16LE,2);b.prototype.writeInt16BE=S(Buffer.prototype.writeInt16BE,2);b.prototype.writeInt32LE=S(Buffer.prototype.writeInt32LE,4);b.prototype.writeInt32BE=S(Buffer.prototype.writeInt32BE,4);b.prototype.writeFloatLE=S(Buffer.prototype.writeFloatLE,4);b.prototype.writeFloatBE=S(Buffer.prototype.writeFloatBE,4);b.prototype.writeDoubleLE=S(Buffer.prototype.writeDoubleLE,8);b.prototype.writeDoubleBE=S(Buffer.prototype.writeDoubleBE,8);b.prototype.writeBuffer=function(s){this.ensureSize(s.length),s.copy(this.buffer,this.position,0,s.length),this.position+=s.length};b.prototype.writeVarInt=function(s){for(var a=1;(s&4294967168)!==0;)this.writeUInt8(s&127|128),s>>>=7,a++;return this.writeUInt8(s&127),a};b.prototype.ensureSize=function(s){if(this.buffer.length<this.position+s)if(this.allowResize){var a=new Buffer(this.position+s);this.buffer.copy(a,0,0,this.buffer.length),this.buffer=a}else throw new RangeError("index out of range")};var rt={encode:function(s){return s<<1^s>>31},decode:function(s){return s>>1^-(s&1)}},G,H;function I(){if(H)return G;H=1,G=i;var s=P,a=T(),u=_,l=L,o=rt;function i(r,t,e,n,c){a.call(this),this.x=r,this.y=t,this.z=e,this.m=n,this.srid=c,this.hasZ=typeof this.z<"u",this.hasM=typeof this.m<"u"}return s.inherits(i,a),i.Z=function(r,t,e,n){var c=new i(r,t,e,void 0,n);return c.hasZ=!0,c},i.M=function(r,t,e,n){var c=new i(r,t,void 0,e,n);return c.hasM=!0,c},i.ZM=function(r,t,e,n,c){var f=new i(r,t,e,n,c);return f.hasZ=!0,f.hasM=!0,f},i._parseWkt=function(r,t){var e=new i;if(e.srid=t.srid,e.hasZ=t.hasZ,e.hasM=t.hasM,r.isMatch(["EMPTY"]))return e;r.expectGroupStart();var n=r.matchCoordinate(t);return e.x=n.x,e.y=n.y,e.z=n.z,e.m=n.m,r.expectGroupEnd(),e},i._parseWkb=function(r,t){var e=i._readWkbPoint(r,t);return e.srid=t.srid,e},i._readWkbPoint=function(r,t){return new i(r.readDouble(),r.readDouble(),t.hasZ?r.readDouble():void 0,t.hasM?r.readDouble():void 0)},i._parseTwkb=function(r,t){var e=new i;return e.hasZ=t.hasZ,e.hasM=t.hasM,t.isEmpty||(e.x=o.decode(r.readVarInt())/t.precisionFactor,e.y=o.decode(r.readVarInt())/t.precisionFactor,e.z=t.hasZ?o.decode(r.readVarInt())/t.zPrecisionFactor:void 0,e.m=t.hasM?o.decode(r.readVarInt())/t.mPrecisionFactor:void 0),e},i._readTwkbPoint=function(r,t,e){return e.x+=o.decode(r.readVarInt())/t.precisionFactor,e.y+=o.decode(r.readVarInt())/t.precisionFactor,t.hasZ&&(e.z+=o.decode(r.readVarInt())/t.zPrecisionFactor),t.hasM&&(e.m+=o.decode(r.readVarInt())/t.mPrecisionFactor),new i(e.x,e.y,e.z,e.m)},i._parseGeoJSON=function(r){return i._readGeoJSONPoint(r.coordinates)},i._readGeoJSONPoint=function(r){return r.length===0?new i:r.length>2?new i(r[0],r[1],r[2]):new i(r[0],r[1])},i.prototype.toWkt=function(){return typeof this.x>"u"&&typeof this.y>"u"&&typeof this.z>"u"&&typeof this.m>"u"?this._getWktType(u.wkt.Point,!0):this._getWktType(u.wkt.Point,!1)+"("+this._getWktCoordinate(this)+")"},i.prototype.toWkb=function(r){var t=new l(this._getWkbSize());return t.writeInt8(1),this._writeWkbType(t,u.wkb.Point,r),typeof this.x>"u"&&typeof this.y>"u"?(t.writeDoubleLE(NaN),t.writeDoubleLE(NaN),this.hasZ&&t.writeDoubleLE(NaN),this.hasM&&t.writeDoubleLE(NaN)):this._writeWkbPoint(t),t.buffer},i.prototype._writeWkbPoint=function(r){r.writeDoubleLE(this.x),r.writeDoubleLE(this.y),this.hasZ&&r.writeDoubleLE(this.z),this.hasM&&r.writeDoubleLE(this.m)},i.prototype.toTwkb=function(){var r=new l(0,!0),t=a.getTwkbPrecision(5,0,0),e=typeof this.x>"u"&&typeof this.y>"u";return this._writeTwkbHeader(r,u.wkb.Point,t,e),e||this._writeTwkbPoint(r,t,new i(0,0,0,0)),r.buffer},i.prototype._writeTwkbPoint=function(r,t,e){var n=this.x*t.xyFactor,c=this.y*t.xyFactor,f=this.z*t.zFactor,y=this.m*t.mFactor;r.writeVarInt(o.encode(n-e.x)),r.writeVarInt(o.encode(c-e.y)),this.hasZ&&r.writeVarInt(o.encode(f-e.z)),this.hasM&&r.writeVarInt(o.encode(y-e.m)),e.x=n,e.y=c,e.z=f,e.m=y},i.prototype._getWkbSize=function(){var r=21;return this.hasZ&&(r+=8),this.hasM&&(r+=8),r},i.prototype.toGeoJSON=function(r){var t=a.prototype.toGeoJSON.call(this,r);return t.type=u.geoJSON.Point,typeof this.x>"u"&&typeof this.y>"u"?t.coordinates=[]:typeof this.z<"u"?t.coordinates=[this.x,this.y,this.z]:t.coordinates=[this.x,this.y],t},G}var R,Y;function V(){if(Y)return R;Y=1,R=i;var s=P,a=T(),u=_,l=I(),o=L;function i(r,t){a.call(this),this.points=r||[],this.srid=t,this.points.length>0&&(this.hasZ=this.points[0].hasZ,this.hasM=this.points[0].hasM)}return s.inherits(i,a),i.Z=function(r,t){var e=new i(r,t);return e.hasZ=!0,e},i.M=function(r,t){var e=new i(r,t);return e.hasM=!0,e},i.ZM=function(r,t){var e=new i(r,t);return e.hasZ=!0,e.hasM=!0,e},i._parseWkt=function(r,t){var e=new i;return e.srid=t.srid,e.hasZ=t.hasZ,e.hasM=t.hasM,r.isMatch(["EMPTY"])||(r.expectGroupStart(),e.points.push.apply(e.points,r.matchCoordinates(t)),r.expectGroupEnd()),e},i._parseWkb=function(r,t){var e=new i;e.srid=t.srid,e.hasZ=t.hasZ,e.hasM=t.hasM;for(var n=r.readUInt32(),c=0;c<n;c++)e.points.push(l._readWkbPoint(r,t));return e},i._parseTwkb=function(r,t){var e=new i;if(e.hasZ=t.hasZ,e.hasM=t.hasM,t.isEmpty)return e;for(var n=new l(0,0,t.hasZ?0:void 0,t.hasM?0:void 0),c=r.readVarInt(),f=0;f<c;f++)e.points.push(l._readTwkbPoint(r,t,n));return e},i._parseGeoJSON=function(r){var t=new i;r.coordinates.length>0&&(t.hasZ=r.coordinates[0].length>2);for(var e=0;e<r.coordinates.length;e++)t.points.push(l._readGeoJSONPoint(r.coordinates[e]));return t},i.prototype.toWkt=function(){return this.points.length===0?this._getWktType(u.wkt.LineString,!0):this._getWktType(u.wkt.LineString,!1)+this._toInnerWkt()},i.prototype._toInnerWkt=function(){for(var r="(",t=0;t<this.points.length;t++)r+=this._getWktCoordinate(this.points[t])+",";return r=r.slice(0,-1),r+=")",r},i.prototype.toWkb=function(r){var t=new o(this._getWkbSize());t.writeInt8(1),this._writeWkbType(t,u.wkb.LineString,r),t.writeUInt32LE(this.points.length);for(var e=0;e<this.points.length;e++)this.points[e]._writeWkbPoint(t);return t.buffer},i.prototype.toTwkb=function(){var r=new o(0,!0),t=a.getTwkbPrecision(5,0,0),e=this.points.length===0;if(this._writeTwkbHeader(r,u.wkb.LineString,t,e),this.points.length>0){r.writeVarInt(this.points.length);for(var n=new l(0,0,0,0),c=0;c<this.points.length;c++)this.points[c]._writeTwkbPoint(r,t,n)}return r.buffer},i.prototype._getWkbSize=function(){var r=16;return this.hasZ&&(r+=8),this.hasM&&(r+=8),1+4+4+this.points.length*r},i.prototype.toGeoJSON=function(r){var t=a.prototype.toGeoJSON.call(this,r);t.type=u.geoJSON.LineString,t.coordinates=[];for(var e=0;e<this.points.length;e++)this.hasZ?t.coordinates.push([this.points[e].x,this.points[e].y,this.points[e].z]):t.coordinates.push([this.points[e].x,this.points[e].y]);return t},R}var O,$;function U(){if($)return O;$=1,O=i;var s=P,a=T(),u=_,l=I(),o=L;function i(r,t,e){a.call(this),this.exteriorRing=r||[],this.interiorRings=t||[],this.srid=e,this.exteriorRing.length>0&&(this.hasZ=this.exteriorRing[0].hasZ,this.hasM=this.exteriorRing[0].hasM)}return s.inherits(i,a),i.Z=function(r,t,e){var n=new i(r,t,e);return n.hasZ=!0,n},i.M=function(r,t,e){var n=new i(r,t,e);return n.hasM=!0,n},i.ZM=function(r,t,e){var n=new i(r,t,e);return n.hasZ=!0,n.hasM=!0,n},i._parseWkt=function(r,t){var e=new i;if(e.srid=t.srid,e.hasZ=t.hasZ,e.hasM=t.hasM,r.isMatch(["EMPTY"]))return e;for(r.expectGroupStart(),r.expectGroupStart(),e.exteriorRing.push.apply(e.exteriorRing,r.matchCoordinates(t)),r.expectGroupEnd();r.isMatch([","]);)r.expectGroupStart(),e.interiorRings.push(r.matchCoordinates(t)),r.expectGroupEnd();return r.expectGroupEnd(),e},i._parseWkb=function(r,t){var e=new i;e.srid=t.srid,e.hasZ=t.hasZ,e.hasM=t.hasM;var n=r.readUInt32();if(n>0){for(var c=r.readUInt32(),f=0;f<c;f++)e.exteriorRing.push(l._readWkbPoint(r,t));for(f=1;f<n;f++){for(var y=[],p=r.readUInt32(),g=0;g<p;g++)y.push(l._readWkbPoint(r,t));e.interiorRings.push(y)}}return e},i._parseTwkb=function(r,t){var e=new i;if(e.hasZ=t.hasZ,e.hasM=t.hasM,t.isEmpty)return e;for(var n=new l(0,0,t.hasZ?0:void 0,t.hasM?0:void 0),c=r.readVarInt(),f=r.readVarInt(),y=0;y<f;y++)e.exteriorRing.push(l._readTwkbPoint(r,t,n));for(y=1;y<c;y++){for(var p=[],g=r.readVarInt(),h=0;h<g;h++)p.push(l._readTwkbPoint(r,t,n));e.interiorRings.push(p)}return e},i._parseGeoJSON=function(r){var t=new i;r.coordinates.length>0&&r.coordinates[0].length>0&&(t.hasZ=r.coordinates[0][0].length>2);for(var e=0;e<r.coordinates.length;e++){e>0&&t.interiorRings.push([]);for(var n=0;n<r.coordinates[e].length;n++)e===0?t.exteriorRing.push(l._readGeoJSONPoint(r.coordinates[e][n])):t.interiorRings[e-1].push(l._readGeoJSONPoint(r.coordinates[e][n]))}return t},i.prototype.toWkt=function(){return this.exteriorRing.length===0?this._getWktType(u.wkt.Polygon,!0):this._getWktType(u.wkt.Polygon,!1)+this._toInnerWkt()},i.prototype._toInnerWkt=function(){for(var r="((",t=0;t<this.exteriorRing.length;t++)r+=this._getWktCoordinate(this.exteriorRing[t])+",";for(r=r.slice(0,-1),r+=")",t=0;t<this.interiorRings.length;t++){r+=",(";for(var e=0;e<this.interiorRings[t].length;e++)r+=this._getWktCoordinate(this.interiorRings[t][e])+",";r=r.slice(0,-1),r+=")"}return r+=")",r},i.prototype.toWkb=function(r){var t=new o(this._getWkbSize());t.writeInt8(1),this._writeWkbType(t,u.wkb.Polygon,r),this.exteriorRing.length>0?(t.writeUInt32LE(1+this.interiorRings.length),t.writeUInt32LE(this.exteriorRing.length)):t.writeUInt32LE(0);for(var e=0;e<this.exteriorRing.length;e++)this.exteriorRing[e]._writeWkbPoint(t);for(e=0;e<this.interiorRings.length;e++){t.writeUInt32LE(this.interiorRings[e].length);for(var n=0;n<this.interiorRings[e].length;n++)this.interiorRings[e][n]._writeWkbPoint(t)}return t.buffer},i.prototype.toTwkb=function(){var r=new o(0,!0),t=a.getTwkbPrecision(5,0,0),e=this.exteriorRing.length===0;if(this._writeTwkbHeader(r,u.wkb.Polygon,t,e),this.exteriorRing.length>0){r.writeVarInt(1+this.interiorRings.length),r.writeVarInt(this.exteriorRing.length);for(var n=new l(0,0,0,0),c=0;c<this.exteriorRing.length;c++)this.exteriorRing[c]._writeTwkbPoint(r,t,n);for(c=0;c<this.interiorRings.length;c++){r.writeVarInt(this.interiorRings[c].length);for(var f=0;f<this.interiorRings[c].length;f++)this.interiorRings[c][f]._writeTwkbPoint(r,t,n)}}return r.buffer},i.prototype._getWkbSize=function(){var r=16;this.hasZ&&(r+=8),this.hasM&&(r+=8);var t=1+4+4;this.exteriorRing.length>0&&(t+=4+this.exteriorRing.length*r);for(var e=0;e<this.interiorRings.length;e++)t+=4+this.interiorRings[e].length*r;return t},i.prototype.toGeoJSON=function(r){var t=a.prototype.toGeoJSON.call(this,r);if(t.type=u.geoJSON.Polygon,t.coordinates=[],this.exteriorRing.length>0){for(var e=[],n=0;n<this.exteriorRing.length;n++)this.hasZ?e.push([this.exteriorRing[n].x,this.exteriorRing[n].y,this.exteriorRing[n].z]):e.push([this.exteriorRing[n].x,this.exteriorRing[n].y]);t.coordinates.push(e)}for(var c=0;c<this.interiorRings.length;c++){for(var f=[],y=0;y<this.interiorRings[c].length;y++)this.hasZ?f.push([this.interiorRings[c][y].x,this.interiorRings[c][y].y,this.interiorRings[c][y].z]):f.push([this.interiorRings[c][y].x,this.interiorRings[c][y].y]);t.coordinates.push(f)}return t},O}var N,K;function it(){if(K)return N;K=1,N=i;var s=P,a=_,u=T(),l=I(),o=L;function i(r,t){u.call(this),this.points=r||[],this.srid=t,this.points.length>0&&(this.hasZ=this.points[0].hasZ,this.hasM=this.points[0].hasM)}return s.inherits(i,u),i.Z=function(r,t){var e=new i(r,t);return e.hasZ=!0,e},i.M=function(r,t){var e=new i(r,t);return e.hasM=!0,e},i.ZM=function(r,t){var e=new i(r,t);return e.hasZ=!0,e.hasM=!0,e},i._parseWkt=function(r,t){var e=new i;return e.srid=t.srid,e.hasZ=t.hasZ,e.hasM=t.hasM,r.isMatch(["EMPTY"])||(r.expectGroupStart(),e.points.push.apply(e.points,r.matchCoordinates(t)),r.expectGroupEnd()),e},i._parseWkb=function(r,t){var e=new i;e.srid=t.srid,e.hasZ=t.hasZ,e.hasM=t.hasM;for(var n=r.readUInt32(),c=0;c<n;c++)e.points.push(u.parse(r,t));return e},i._parseTwkb=function(r,t){var e=new i;if(e.hasZ=t.hasZ,e.hasM=t.hasM,t.isEmpty)return e;for(var n=new l(0,0,t.hasZ?0:void 0,t.hasM?0:void 0),c=r.readVarInt(),f=0;f<c;f++)e.points.push(l._readTwkbPoint(r,t,n));return e},i._parseGeoJSON=function(r){var t=new i;r.coordinates.length>0&&(t.hasZ=r.coordinates[0].length>2);for(var e=0;e<r.coordinates.length;e++)t.points.push(l._parseGeoJSON({coordinates:r.coordinates[e]}));return t},i.prototype.toWkt=function(){if(this.points.length===0)return this._getWktType(a.wkt.MultiPoint,!0);for(var r=this._getWktType(a.wkt.MultiPoint,!1)+"(",t=0;t<this.points.length;t++)r+=this._getWktCoordinate(this.points[t])+",";return r=r.slice(0,-1),r+=")",r},i.prototype.toWkb=function(){var r=new o(this._getWkbSize());r.writeInt8(1),this._writeWkbType(r,a.wkb.MultiPoint),r.writeUInt32LE(this.points.length);for(var t=0;t<this.points.length;t++)r.writeBuffer(this.points[t].toWkb({srid:this.srid}));return r.buffer},i.prototype.toTwkb=function(){var r=new o(0,!0),t=u.getTwkbPrecision(5,0,0),e=this.points.length===0;if(this._writeTwkbHeader(r,a.wkb.MultiPoint,t,e),this.points.length>0){r.writeVarInt(this.points.length);for(var n=new l(0,0,0,0),c=0;c<this.points.length;c++)this.points[c]._writeTwkbPoint(r,t,n)}return r.buffer},i.prototype._getWkbSize=function(){var r=16;return this.hasZ&&(r+=8),this.hasM&&(r+=8),r+=5,1+4+4+this.points.length*r},i.prototype.toGeoJSON=function(r){var t=u.prototype.toGeoJSON.call(this,r);t.type=a.geoJSON.MultiPoint,t.coordinates=[];for(var e=0;e<this.points.length;e++)t.coordinates.push(this.points[e].toGeoJSON().coordinates);return t},N}var B,Q;function nt(){if(Q)return B;Q=1,B=r;var s=P,a=_,u=T(),l=I(),o=V(),i=L;function r(t,e){u.call(this),this.lineStrings=t||[],this.srid=e,this.lineStrings.length>0&&(this.hasZ=this.lineStrings[0].hasZ,this.hasM=this.lineStrings[0].hasM)}return s.inherits(r,u),r.Z=function(t,e){var n=new r(t,e);return n.hasZ=!0,n},r.M=function(t,e){var n=new r(t,e);return n.hasM=!0,n},r.ZM=function(t,e){var n=new r(t,e);return n.hasZ=!0,n.hasM=!0,n},r._parseWkt=function(t,e){var n=new r;if(n.srid=e.srid,n.hasZ=e.hasZ,n.hasM=e.hasM,t.isMatch(["EMPTY"]))return n;t.expectGroupStart();do t.expectGroupStart(),n.lineStrings.push(new o(t.matchCoordinates(e))),t.expectGroupEnd();while(t.isMatch([","]));return t.expectGroupEnd(),n},r._parseWkb=function(t,e){var n=new r;n.srid=e.srid,n.hasZ=e.hasZ,n.hasM=e.hasM;for(var c=t.readUInt32(),f=0;f<c;f++)n.lineStrings.push(u.parse(t,e));return n},r._parseTwkb=function(t,e){var n=new r;if(n.hasZ=e.hasZ,n.hasM=e.hasM,e.isEmpty)return n;for(var c=new l(0,0,e.hasZ?0:void 0,e.hasM?0:void 0),f=t.readVarInt(),y=0;y<f;y++){var p=new o;p.hasZ=e.hasZ,p.hasM=e.hasM;for(var g=t.readVarInt(),h=0;h<g;h++)p.points.push(l._readTwkbPoint(t,e,c));n.lineStrings.push(p)}return n},r._parseGeoJSON=function(t){var e=new r;t.coordinates.length>0&&t.coordinates[0].length>0&&(e.hasZ=t.coordinates[0][0].length>2);for(var n=0;n<t.coordinates.length;n++)e.lineStrings.push(o._parseGeoJSON({coordinates:t.coordinates[n]}));return e},r.prototype.toWkt=function(){if(this.lineStrings.length===0)return this._getWktType(a.wkt.MultiLineString,!0);for(var t=this._getWktType(a.wkt.MultiLineString,!1)+"(",e=0;e<this.lineStrings.length;e++)t+=this.lineStrings[e]._toInnerWkt()+",";return t=t.slice(0,-1),t+=")",t},r.prototype.toWkb=function(){var t=new i(this._getWkbSize());t.writeInt8(1),this._writeWkbType(t,a.wkb.MultiLineString),t.writeUInt32LE(this.lineStrings.length);for(var e=0;e<this.lineStrings.length;e++)t.writeBuffer(this.lineStrings[e].toWkb({srid:this.srid}));return t.buffer},r.prototype.toTwkb=function(){var t=new i(0,!0),e=u.getTwkbPrecision(5,0,0),n=this.lineStrings.length===0;if(this._writeTwkbHeader(t,a.wkb.MultiLineString,e,n),this.lineStrings.length>0){t.writeVarInt(this.lineStrings.length);for(var c=new l(0,0,0,0),f=0;f<this.lineStrings.length;f++){t.writeVarInt(this.lineStrings[f].points.length);for(var y=0;y<this.lineStrings[f].points.length;y++)this.lineStrings[f].points[y]._writeTwkbPoint(t,e,c)}}return t.buffer},r.prototype._getWkbSize=function(){for(var t=9,e=0;e<this.lineStrings.length;e++)t+=this.lineStrings[e]._getWkbSize();return t},r.prototype.toGeoJSON=function(t){var e=u.prototype.toGeoJSON.call(this,t);e.type=a.geoJSON.MultiLineString,e.coordinates=[];for(var n=0;n<this.lineStrings.length;n++)e.coordinates.push(this.lineStrings[n].toGeoJSON().coordinates);return e},B}var z,X;function st(){if(X)return z;X=1,z=r;var s=P,a=_,u=T(),l=I(),o=U(),i=L;function r(t,e){u.call(this),this.polygons=t||[],this.srid=e,this.polygons.length>0&&(this.hasZ=this.polygons[0].hasZ,this.hasM=this.polygons[0].hasM)}return s.inherits(r,u),r.Z=function(t,e){var n=new r(t,e);return n.hasZ=!0,n},r.M=function(t,e){var n=new r(t,e);return n.hasM=!0,n},r.ZM=function(t,e){var n=new r(t,e);return n.hasZ=!0,n.hasM=!0,n},r._parseWkt=function(t,e){var n=new r;if(n.srid=e.srid,n.hasZ=e.hasZ,n.hasM=e.hasM,t.isMatch(["EMPTY"]))return n;t.expectGroupStart();do{t.expectGroupStart();var c=[],f=[];for(t.expectGroupStart(),c.push.apply(c,t.matchCoordinates(e)),t.expectGroupEnd();t.isMatch([","]);)t.expectGroupStart(),f.push(t.matchCoordinates(e)),t.expectGroupEnd();n.polygons.push(new o(c,f)),t.expectGroupEnd()}while(t.isMatch([","]));return t.expectGroupEnd(),n},r._parseWkb=function(t,e){var n=new r;n.srid=e.srid,n.hasZ=e.hasZ,n.hasM=e.hasM;for(var c=t.readUInt32(),f=0;f<c;f++)n.polygons.push(u.parse(t,e));return n},r._parseTwkb=function(t,e){var n=new r;if(n.hasZ=e.hasZ,n.hasM=e.hasM,e.isEmpty)return n;for(var c=new l(0,0,e.hasZ?0:void 0,e.hasM?0:void 0),f=t.readVarInt(),y=0;y<f;y++){var p=new o;p.hasZ=e.hasZ,p.hasM=e.hasM;for(var g=t.readVarInt(),h=t.readVarInt(),d=0;d<h;d++)p.exteriorRing.push(l._readTwkbPoint(t,e,c));for(d=1;d<g;d++){for(var m=[],w=t.readVarInt(),k=0;k<w;k++)m.push(l._readTwkbPoint(t,e,c));p.interiorRings.push(m)}n.polygons.push(p)}return n},r._parseGeoJSON=function(t){var e=new r;t.coordinates.length>0&&t.coordinates[0].length>0&&t.coordinates[0][0].length>0&&(e.hasZ=t.coordinates[0][0][0].length>2);for(var n=0;n<t.coordinates.length;n++)e.polygons.push(o._parseGeoJSON({coordinates:t.coordinates[n]}));return e},r.prototype.toWkt=function(){if(this.polygons.length===0)return this._getWktType(a.wkt.MultiPolygon,!0);for(var t=this._getWktType(a.wkt.MultiPolygon,!1)+"(",e=0;e<this.polygons.length;e++)t+=this.polygons[e]._toInnerWkt()+",";return t=t.slice(0,-1),t+=")",t},r.prototype.toWkb=function(){var t=new i(this._getWkbSize());t.writeInt8(1),this._writeWkbType(t,a.wkb.MultiPolygon),t.writeUInt32LE(this.polygons.length);for(var e=0;e<this.polygons.length;e++)t.writeBuffer(this.polygons[e].toWkb({srid:this.srid}));return t.buffer},r.prototype.toTwkb=function(){var t=new i(0,!0),e=u.getTwkbPrecision(5,0,0),n=this.polygons.length===0;if(this._writeTwkbHeader(t,a.wkb.MultiPolygon,e,n),this.polygons.length>0){t.writeVarInt(this.polygons.length);for(var c=new l(0,0,0,0),f=0;f<this.polygons.length;f++){t.writeVarInt(1+this.polygons[f].interiorRings.length),t.writeVarInt(this.polygons[f].exteriorRing.length);for(var y=0;y<this.polygons[f].exteriorRing.length;y++)this.polygons[f].exteriorRing[y]._writeTwkbPoint(t,e,c);for(y=0;y<this.polygons[f].interiorRings.length;y++){t.writeVarInt(this.polygons[f].interiorRings[y].length);for(var p=0;p<this.polygons[f].interiorRings[y].length;p++)this.polygons[f].interiorRings[y][p]._writeTwkbPoint(t,e,c)}}}return t.buffer},r.prototype._getWkbSize=function(){for(var t=9,e=0;e<this.polygons.length;e++)t+=this.polygons[e]._getWkbSize();return t},r.prototype.toGeoJSON=function(t){var e=u.prototype.toGeoJSON.call(this,t);e.type=a.geoJSON.MultiPolygon,e.coordinates=[];for(var n=0;n<this.polygons.length;n++)e.coordinates.push(this.polygons[n].toGeoJSON().coordinates);return e},z}var C,j;function ot(){if(j)return C;j=1,C=o;var s=P,a=_,u=T(),l=L;function o(i,r){u.call(this),this.geometries=i||[],this.srid=r,this.geometries.length>0&&(this.hasZ=this.geometries[0].hasZ,this.hasM=this.geometries[0].hasM)}return s.inherits(o,u),o.Z=function(i,r){var t=new o(i,r);return t.hasZ=!0,t},o.M=function(i,r){var t=new o(i,r);return t.hasM=!0,t},o.ZM=function(i,r){var t=new o(i,r);return t.hasZ=!0,t.hasM=!0,t},o._parseWkt=function(i,r){var t=new o;if(t.srid=r.srid,t.hasZ=r.hasZ,t.hasM=r.hasM,i.isMatch(["EMPTY"]))return t;i.expectGroupStart();do t.geometries.push(u.parse(i));while(i.isMatch([","]));return i.expectGroupEnd(),t},o._parseWkb=function(i,r){var t=new o;t.srid=r.srid,t.hasZ=r.hasZ,t.hasM=r.hasM;for(var e=i.readUInt32(),n=0;n<e;n++)t.geometries.push(u.parse(i,r));return t},o._parseTwkb=function(i,r){var t=new o;if(t.hasZ=r.hasZ,t.hasM=r.hasM,r.isEmpty)return t;for(var e=i.readVarInt(),n=0;n<e;n++)t.geometries.push(u.parseTwkb(i));return t},o._parseGeoJSON=function(i){for(var r=new o,t=0;t<i.geometries.length;t++)r.geometries.push(u._parseGeoJSON(i.geometries[t],!0));return r.geometries.length>0&&(r.hasZ=r.geometries[0].hasZ),r},o.prototype.toWkt=function(){if(this.geometries.length===0)return this._getWktType(a.wkt.GeometryCollection,!0);for(var i=this._getWktType(a.wkt.GeometryCollection,!1)+"(",r=0;r<this.geometries.length;r++)i+=this.geometries[r].toWkt()+",";return i=i.slice(0,-1),i+=")",i},o.prototype.toWkb=function(){var i=new l(this._getWkbSize());i.writeInt8(1),this._writeWkbType(i,a.wkb.GeometryCollection),i.writeUInt32LE(this.geometries.length);for(var r=0;r<this.geometries.length;r++)i.writeBuffer(this.geometries[r].toWkb({srid:this.srid}));return i.buffer},o.prototype.toTwkb=function(){var i=new l(0,!0),r=u.getTwkbPrecision(5,0,0),t=this.geometries.length===0;if(this._writeTwkbHeader(i,a.wkb.GeometryCollection,r,t),this.geometries.length>0){i.writeVarInt(this.geometries.length);for(var e=0;e<this.geometries.length;e++)i.writeBuffer(this.geometries[e].toTwkb())}return i.buffer},o.prototype._getWkbSize=function(){for(var i=9,r=0;r<this.geometries.length;r++)i+=this.geometries[r]._getWkbSize();return i},o.prototype.toGeoJSON=function(i){var r=u.prototype.toGeoJSON.call(this,i);r.type=a.geoJSON.GeometryCollection,r.geometries=[];for(var t=0;t<this.geometries.length;t++)r.geometries.push(this.geometries[t].toGeoJSON());return r},C}var pt=v;function v(s,a){this.buffer=s,this.position=0,this.isBigEndian=a||!1}function x(s,a,u){return function(){var l;return this.isBigEndian?l=a.call(this.buffer,this.position):l=s.call(this.buffer,this.position),this.position+=u,l}}v.prototype.readUInt8=x(Buffer.prototype.readUInt8,Buffer.prototype.readUInt8,1);v.prototype.readUInt16=x(Buffer.prototype.readUInt16LE,Buffer.prototype.readUInt16BE,2);v.prototype.readUInt32=x(Buffer.prototype.readUInt32LE,Buffer.prototype.readUInt32BE,4);v.prototype.readInt8=x(Buffer.prototype.readInt8,Buffer.prototype.readInt8,1);v.prototype.readInt16=x(Buffer.prototype.readInt16LE,Buffer.prototype.readInt16BE,2);v.prototype.readInt32=x(Buffer.prototype.readInt32LE,Buffer.prototype.readInt32BE,4);v.prototype.readFloat=x(Buffer.prototype.readFloatLE,Buffer.prototype.readFloatBE,4);v.prototype.readDouble=x(Buffer.prototype.readDoubleLE,Buffer.prototype.readDoubleBE,8);v.prototype.readVarInt=function(){var s,a=0,u=0;do s=this.buffer[this.position+u],a+=(s&127)<<7*u,u++;while(s>=128);return this.position+=u,a};var F,tt;function ut(){if(tt)return F;tt=1,F=u;var s=_,a=I();function u(l){this.value=l,this.position=0}return u.prototype.match=function(l){this.skipWhitespaces();for(var o=0;o<l.length;o++)if(this.value.substring(this.position).indexOf(l[o])===0)return this.position+=l[o].length,l[o];return null},u.prototype.matchRegex=function(l){this.skipWhitespaces();for(var o=0;o<l.length;o++){var i=this.value.substring(this.position).match(l[o]);if(i)return this.position+=i[0].length,i}return null},u.prototype.isMatch=function(l){this.skipWhitespaces();for(var o=0;o<l.length;o++)if(this.value.substring(this.position).indexOf(l[o])===0)return this.position+=l[o].length,!0;return!1},u.prototype.matchType=function(){var l=this.match([s.wkt.Point,s.wkt.LineString,s.wkt.Polygon,s.wkt.MultiPoint,s.wkt.MultiLineString,s.wkt.MultiPolygon,s.wkt.GeometryCollection]);if(!l)throw new Error("Expected geometry type");return l},u.prototype.matchDimension=function(){var l=this.match(["ZM","Z","M"]);switch(l){case"ZM":return{hasZ:!0,hasM:!0};case"Z":return{hasZ:!0,hasM:!1};case"M":return{hasZ:!1,hasM:!0};default:return{hasZ:!1,hasM:!1}}},u.prototype.expectGroupStart=function(){if(!this.isMatch(["("]))throw new Error("Expected group start")},u.prototype.expectGroupEnd=function(){if(!this.isMatch([")"]))throw new Error("Expected group end")},u.prototype.matchCoordinate=function(l){var o;if(l.hasZ&&l.hasM?o=this.matchRegex([/^(\S*)\s+(\S*)\s+(\S*)\s+([^\s,)]*)/]):l.hasZ||l.hasM?o=this.matchRegex([/^(\S*)\s+(\S*)\s+([^\s,)]*)/]):o=this.matchRegex([/^(\S*)\s+([^\s,)]*)/]),!o)throw new Error("Expected coordinates");return l.hasZ&&l.hasM?new a(parseFloat(o[1]),parseFloat(o[2]),parseFloat(o[3]),parseFloat(o[4])):l.hasZ?new a(parseFloat(o[1]),parseFloat(o[2]),parseFloat(o[3])):l.hasM?new a(parseFloat(o[1]),parseFloat(o[2]),void 0,parseFloat(o[3])):new a(parseFloat(o[1]),parseFloat(o[2]))},u.prototype.matchCoordinates=function(l){var o=[];do{var i=this.isMatch(["("]);o.push(this.matchCoordinate(l)),i&&this.expectGroupEnd()}while(this.isMatch([","]));return o},u.prototype.skipWhitespaces=function(){for(;this.position<this.value.length&&this.value[this.position]===" ";)this.position++},F}var J,et;function T(){if(et)return J;et=1,J=y;var s=_,a=I(),u=V(),l=U(),o=it(),i=nt(),r=st(),t=ot(),e=pt,n=L,c=ut(),f=rt;function y(){this.srid=void 0,this.hasZ=!1,this.hasM=!1}return y.parse=function(p,g){var h=typeof p;if(h==="string"||p instanceof c)return y._parseWkt(p);if(Buffer.isBuffer(p)||p instanceof e)return y._parseWkb(p,g);throw new Error("first argument must be a string or Buffer")},y._parseWkt=function(p){var g,h;p instanceof c?g=p:g=new c(p);var d=g.matchRegex([/^SRID=(\d+);/]);d&&(h=parseInt(d[1],10));var m=g.matchType(),w=g.matchDimension(),k={srid:h,hasZ:w.hasZ,hasM:w.hasM};switch(m){case s.wkt.Point:return a._parseWkt(g,k);case s.wkt.LineString:return u._parseWkt(g,k);case s.wkt.Polygon:return l._parseWkt(g,k);case s.wkt.MultiPoint:return o._parseWkt(g,k);case s.wkt.MultiLineString:return i._parseWkt(g,k);case s.wkt.MultiPolygon:return r._parseWkt(g,k);case s.wkt.GeometryCollection:return t._parseWkt(g,k)}},y._parseWkb=function(p,g){var h,d,m,w={};switch(p instanceof e?h=p:h=new e(p),h.isBigEndian=!h.readInt8(),d=h.readUInt32(),w.hasSrid=(d&536870912)===536870912,w.isEwkb=d&536870912||d&1073741824||d&2147483648,w.hasSrid&&(w.srid=h.readUInt32()),w.hasZ=!1,w.hasM=!1,!w.isEwkb&&(!g||!g.isEwkb)?d>=1e3&&d<2e3?(w.hasZ=!0,m=d-1e3):d>=2e3&&d<3e3?(w.hasM=!0,m=d-2e3):d>=3e3&&d<4e3?(w.hasZ=!0,w.hasM=!0,m=d-3e3):m=d:(d&2147483648&&(w.hasZ=!0),d&1073741824&&(w.hasM=!0),m=d&15),m){case s.wkb.Point:return a._parseWkb(h,w);case s.wkb.LineString:return u._parseWkb(h,w);case s.wkb.Polygon:return l._parseWkb(h,w);case s.wkb.MultiPoint:return o._parseWkb(h,w);case s.wkb.MultiLineString:return i._parseWkb(h,w);case s.wkb.MultiPolygon:return r._parseWkb(h,w);case s.wkb.GeometryCollection:return t._parseWkb(h,w);default:throw new Error("GeometryType "+m+" not supported")}},y.parseTwkb=function(p){var g,h={};p instanceof e?g=p:g=new e(p);var d=g.readUInt8(),m=g.readUInt8(),w=d&15;if(h.precision=f.decode(d>>4),h.precisionFactor=Math.pow(10,h.precision),h.hasBoundingBox=m>>0&1,h.hasSizeAttribute=m>>1&1,h.hasIdList=m>>2&1,h.hasExtendedPrecision=m>>3&1,h.isEmpty=m>>4&1,h.hasExtendedPrecision){var k=g.readUInt8();h.hasZ=(k&1)===1,h.hasM=(k&2)===2,h.zPrecision=f.decode((k&28)>>2),h.zPrecisionFactor=Math.pow(10,h.zPrecision),h.mPrecision=f.decode((k&224)>>5),h.mPrecisionFactor=Math.pow(10,h.mPrecision)}else h.hasZ=!1,h.hasM=!1;if(h.hasSizeAttribute&&g.readVarInt(),h.hasBoundingBox){var Z=2;h.hasZ&&Z++,h.hasM&&Z++;for(var q=0;q<Z;q++)g.readVarInt(),g.readVarInt()}switch(w){case s.wkb.Point:return a._parseTwkb(g,h);case s.wkb.LineString:return u._parseTwkb(g,h);case s.wkb.Polygon:return l._parseTwkb(g,h);case s.wkb.MultiPoint:return o._parseTwkb(g,h);case s.wkb.MultiLineString:return i._parseTwkb(g,h);case s.wkb.MultiPolygon:return r._parseTwkb(g,h);case s.wkb.GeometryCollection:return t._parseTwkb(g,h);default:throw new Error("GeometryType "+w+" not supported")}},y.parseGeoJSON=function(p){return y._parseGeoJSON(p)},y._parseGeoJSON=function(p,g){var h;switch(p.type){case s.geoJSON.Point:h=a._parseGeoJSON(p);break;case s.geoJSON.LineString:h=u._parseGeoJSON(p);break;case s.geoJSON.Polygon:h=l._parseGeoJSON(p);break;case s.geoJSON.MultiPoint:h=o._parseGeoJSON(p);break;case s.geoJSON.MultiLineString:h=i._parseGeoJSON(p);break;case s.geoJSON.MultiPolygon:h=r._parseGeoJSON(p);break;case s.geoJSON.GeometryCollection:h=t._parseGeoJSON(p);break;default:throw new Error("GeometryType "+p.type+" not supported")}if(p.crs&&p.crs.type&&p.crs.type==="name"&&p.crs.properties&&p.crs.properties.name){var d=p.crs.properties.name;if(d.indexOf("EPSG:")===0)h.srid=parseInt(d.substring(5));else if(d.indexOf("urn:ogc:def:crs:EPSG::")===0)h.srid=parseInt(d.substring(22));else throw new Error("Unsupported crs: "+d)}else g||(h.srid=4326);return h},y.prototype.toEwkt=function(){return"SRID="+this.srid+";"+this.toWkt()},y.prototype.toEwkb=function(){var p=new n(this._getWkbSize()+4),g=this.toWkb();return p.writeInt8(1),p.writeUInt32LE((g.slice(1,5).readUInt32LE(0)|536870912)>>>0,!0),p.writeUInt32LE(this.srid),p.writeBuffer(g.slice(5)),p.buffer},y.prototype._getWktType=function(p,g){var h=p;return this.hasZ&&this.hasM?h+=" ZM ":this.hasZ?h+=" Z ":this.hasM&&(h+=" M "),g&&!this.hasZ&&!this.hasM&&(h+=" "),g&&(h+="EMPTY"),h},y.prototype._getWktCoordinate=function(p){var g=p.x+" "+p.y;return this.hasZ&&(g+=" "+p.z),this.hasM&&(g+=" "+p.m),g},y.prototype._writeWkbType=function(p,g,h){var d=0;typeof this.srid>"u"&&(!h||typeof h.srid>"u")?this.hasZ&&this.hasM?d+=3e3:this.hasZ?d+=1e3:this.hasM&&(d+=2e3):(this.hasZ&&(d|=2147483648),this.hasM&&(d|=1073741824)),p.writeUInt32LE(d+g>>>0,!0)},y.getTwkbPrecision=function(p,g,h){return{xy:p,z:g,m:h,xyFactor:Math.pow(10,p),zFactor:Math.pow(10,g),mFactor:Math.pow(10,h)}},y.prototype._writeTwkbHeader=function(p,g,h,d){var m=(f.encode(h.xy)<<4)+g,w=(this.hasZ||this.hasM)<<3;if(w+=d<<4,p.writeUInt8(m),p.writeUInt8(w),this.hasZ||this.hasM){var k=0;this.hasZ&&(k|=1),this.hasM&&(k|=2),p.writeUInt8(k)}},y.prototype.toGeoJSON=function(p){var g={};return this.srid&&p&&(p.shortCrs?g.crs={type:"name",properties:{name:"EPSG:"+this.srid}}:p.longCrs&&(g.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+this.srid}})),g},J}T();I();V();U();it();nt();st();ot();const ct=""+globalThis.__publicAssetsURL("assets/images/baseMaps/googleStreets.jpg"),gt=""+globalThis.__publicAssetsURL("assets/images/baseMaps/googleSatellite.jpg"),ft=""+globalThis.__publicAssetsURL("assets/images/baseMaps/openstreet.jpg"),yt={mixins:[at],components:{},mounted(){this.do_render&&this.initMap()},computed:{geoVal(){return this.model.form[this.model.component]}},watch:{do_render(s,a){s?this.editMode?!this.geoVal&&!this.map&&this.initMap():this.initMap():this.destroy()},geoVal(s,a){s&&a===null&&this.getGisData()}},data(){return{map:null,parcelLayer:null,currentLayer:null,vector:null,source:null,isLoading:!1,isLoadingLayer:!1,q:"",selectedLayer:null,layers:{otm:new ol.source.TileImage({url:"https://{a-c}.tile.opentopomap.org/{z}/{x}/{y}.png"}),osm:new ol.source.TileImage({url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),osmBW:new ol.source.TileImage({url:"https://tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png"}),osmCycle:new ol.source.TileImage({url:"https://tile.thunderforest.com/cycle/{z}/{x}/{y}.png"}),googleLayerRoadNames:new ol.source.TileImage({url:"https://mt1.google.com/vt/lyrs=h&x={x}&y={y}&z={z}"}),googleLayerRoadmap:new ol.source.TileImage({url:"https://mt1.google.com/vt/lyrs=m&x={x}&y={y}&z={z}"}),googleLayerSatellite:new ol.source.TileImage({url:"https://mt1.google.com/vt/lyrs=y&x={x}&y={y}&z={z}"}),esriLayerStreet:new ol.source.TileImage({url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}"}),esriLayerTopo:new ol.source.TileImage({url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}"}),cartoPositron:new ol.source.TileImage({url:"https://cartodb-basemaps-a.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"}),stamenTerrain:new ol.source.TileImage({url:"https://a.tile.stamen.com/terrain/{z}/{x}/{y}.png"}),alagacSpecial:new ol.source.TileImage({url:"https://geoportal.nsdi.gov.mn/alagac/rest/services/ALAGAC/11THG/MapServer/tile/{z}/{y}/{x}"}),alagacForest:new ol.source.TileImage({url:"https://geoportal.nsdi.gov.mn/alagac/rest/services/ALAGAC/CTM_map/MapServer/tile/{z}/{y}/{x}"}),nsdi:new ol.source.TileImage({url:"https://gisserver01.nsdi.gov.mn/gzbgzzg/rest/services/EngineerHM/Ulaanbaatar_Gazar_Hudlul_Bichil_Mujlal_Hursnii_Orgil_Hurdatgal_UTM48N/MapServer/export?bbox=606139.8364730093,5264976.112310054,765882.3714873542,5333060.391939491"})}}},methods:{initMap(){this.source=new ol.source.Vector,this.vector=new ol.layer.Vector({source:this.source,style:new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255, 255, 255, 0.2)"}),stroke:new ol.style.Stroke({color:"#ffcc33",width:2}),image:new ol.style.Circle({radius:7,fill:new ol.style.Fill({color:"#ffcc33"})})})}),this.currentLayer=new ol.layer.Tile({source:new ol.source.TileImage({url:"https://mt1.google.com/vt/lyrs=m&x={x}&y={y}&z={z}",crossOrigin:"Anonymous"})}),this.map=new ol.Map({target:"qgis",layers:[this.currentLayer,this.vector],view:new ol.View({center:ol.proj.fromLonLat([106.831832,47.8916288]),zoom:12}),controls:ol.control.defaults().extend([new ol.control.FullScreen])}),this.drawLayer(),this.map.on("click",s=>{let a=ol.proj.transform(s.coordinate,"EPSG:3857","EPSG:4326"),u=parseFloat(a[1]).toFixed(6),l=parseFloat(a[0]).toFixed(6);if(this.map.getView().setCenter(ol.proj.fromLonLat([parseFloat(l),parseFloat(u)])),this.map.getView().setZoom(14),this.parcelLayer!=null){let o=this.map.getView(),i=o.getResolution(),t=this.parcelLayer.getSource().getGetFeatureInfoUrl(s.coordinate,i,o.getProjection(),{INFO_FORMAT:"application/json",FEATURE_COUNT:50});t&&fetch(t).then(e=>e.json()).then(e=>{e!=null&&e.features.length>0&&e.features.forEach(n=>{n.properties&&(this.setFormField(n.properties),this.model.form[this.model.component]=n.properties[this.meta.qgisOptions.cAttr],this.geoVal=n.properties[this.meta.qgisOptions.cAttr],this.getGisData(n.geometry.type))})})}}),this.map.removeLayer(this.selectedLayer),this.map.removeLayer(this.markerLayer)},switchLayer(s){switch(s){case"otm":this.currentLayer.setSource(this.layers.otm);break;case"googleRoad":this.currentLayer.setSource(this.layers.googleLayerRoadmap);break;case"googleSatellite":this.currentLayer.setSource(this.layers.googleLayerSatellite);break;case"esriTopo":this.currentLayer.setSource(this.layers.esriLayerTopo);break;case"esriStreet":this.currentLayer.setSource(this.layers.esriLayerStreet);break;case"cartoPositron":this.currentLayer.setSource(this.layers.cartoPositron);break;case"stamenTerrain":this.currentLayer.setSource(this.layers.stamenTerrain);break;case"osm":this.currentLayer.setSource(this.layers.osm);break;case"osmBW":this.currentLayer.setSource(this.layers.osmBW);break;case"osmCycle":this.currentLayer.setSource(this.layers.osmCycle);break;case"alagacSpecial":this.currentLayer.setSource(this.layers.alagacSpecial);break;case"alagacForest":this.currentLayer.setSource(this.layers.alagacForest);break;case"nsdi":this.currentLayer.setSource(this.layers.nsdi);break}},setFormField(s){this.meta.qgisOptions.attrList.forEach(a=>{this.model.form[a.label]=s[a.value]})},drawLayer(){this.isLoadingLayer=!0,this.parcelLayer=new ol.layer.Tile({name:"wms",source:new ol.source.TileWMS({ratio:1,url:this.meta.qgisOptions.service,params:{FORMAT:"image/png",VERSION:"1.1.1",tiled:!0,STYLES:"",LAYERS:this.meta.qgisOptions.link,exceptions:"application/vnd.ogc.se_inimage",tilesOrigin:619573.6875+","+52965535e-1}})}),this.map.addLayer(this.parcelLayer),this.isLoadingLayer=!1},getGisData(){this.isLoading=!0,axios.get(`https://urban.gov.mn/urban/gis/${this.meta.qgisOptions.cTable}/${this.meta.qgisOptions.cShapeField}/${this.meta.qgisOptions.cAttr}/${this.geoVal}`).then(({data:s})=>{if(s.status){if(this.map.removeLayer(this.selectedLayer),s.point){let u=JSON.parse(s.geo_shape);this.drawSelectedPoint(u.coordinates)}else this.drawSelected(s.shape);let a=JSON.parse(s.center);this.map.getView().setCenter(ol.proj.fromLonLat(a.coordinates)),this.map.getView().setZoom(15)}this.isLoading=!1}).catch(()=>{this.isLoading=!1})},drawSelectedPoint(s){this.map.removeLayer(this.markerLayer);let a=new ol.geom.Point(ol.proj.transform(s,"EPSG:4326","EPSG:3857")),u=new ol.Feature({geometry:a}),l=new ol.style.Icon({src:"/images/markers/default.png"});u.setStyle(new ol.style.Style({image:l}));let o=new ol.source.Vector({features:[u]});this.markerLayer=new ol.layer.Vector({title:"Selected Point",visible:!0,source:o}),console.log("I am here",this.markerLayer),this.map.addLayer(this.markerLayer)},drawSelected(s){this.map.removeLayer(this.selectedLayer);let u=new ol.format.WKT().readFeature(s);u.getGeometry().transform("EPSG:4326","EPSG:3857");let l=new ol.style.Style({fill:new ol.style.Fill({color:"rgba(255,0,0, .5)"}),stroke:new ol.style.Stroke({color:"rgba(255,0,0, 1)",width:2,lineDash:[.1,5]})});this.selectedLayer=new ol.layer.Vector({source:new ol.source.Vector({features:[u]}),style:l}),this.map.addLayer(this.selectedLayer)},destroy(){this.map.removeLayer(this.selectedLayer),this.map.getView().setCenter(ol.proj.fromLonLat([106.831832,47.8916288])),this.map.getView().setZoom(12)}}},dt={class:"qgis-map"},wt=M("div",{id:"qgis",style:{height:"350px","border-radius":"10px"}},null,-1),mt={class:"map-layer-switcher"},kt=M("img",{src:ct,alt:""},null,-1),bt=M("span",null,"Google road",-1),St=[kt,bt],Mt=M("img",{src:gt,alt:""},null,-1),vt=M("span",null,"Google satellite",-1),_t=[Mt,vt],Lt=M("img",{src:ft,alt:""},null,-1),It=M("span",null,"Open Street Map",-1),xt=[Lt,It];function Tt(s,a,u,l,o,i){const r=A("Spin"),t=A("lambda-form-item");return W(),E(t,{label:s.label,name:s.model.component,meta:s.meta},{default:lt(()=>[M("div",dt,[o.isLoading?(W(),E(r,{key:0,fix:""})):D("",!0),o.isLoadingLayer?(W(),E(r,{key:1,fix:""})):D("",!0),wt,M("div",mt,[M("a",{href:"javascript:void(0)",onClick:a[0]||(a[0]=e=>i.switchLayer("googleRoad"))},St),M("a",{href:"javascript:void(0)",onClick:a[1]||(a[1]=e=>i.switchLayer("googleSatellite"))},_t),M("a",{href:"javascript:void(0)",onClick:a[2]||(a[2]=e=>i.switchLayer("osm"))},xt)])])]),_:1},8,["label","name","meta"])}const Ct=ht(yt,[["render",Tt]]);export{Ct as default};
